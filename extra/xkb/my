xkb_keymap {
	xkb_keycodes  {
		include "evdev+aliases(qwerty)"
		<MACC> = 222;
		<MBT1> = 249;
		<MBT2> = 248;
		<MBT3> = 247;
		<MLFT> = 250;
		<MDWN> = 251;
		<MUP>  = 252;
		<MRHT> = 253;
	};
	xkb_types     {
		include "complete"
		type "PC_ALT_LEVEL3" {
			modifiers = Shift+Alt;
			map[None] = Level1;
			map[Shift] = Level2;
			map[Alt] = Level3;
			map[Shift+Alt] = Level4;
			level_name[Level1] = "Base";
			level_name[Level2] = "Shift";
			level_name[Level3] = "Alt Base";
			level_name[Level4] = "Shift Alt";
		};
		type "PC_SUPER_LEVEL3" {
			modifiers = Shift+Mod4;
			map[None] = Level1;
			map[Shift] = Level2;
			map[Mod4] = Level3;
			map[Shift+Mod4] = Level4;
			level_name[Level1] = "Base";
			level_name[Level2] = "Shift";
			level_name[Level3] = "Super Base";
			level_name[Level4] = "Shift Super";
		};
		type "PC_CONTROL_LEVEL3_LEVEL5_ALPHABETIC" {
			modifiers = Shift+Lock+LevelThree+LevelFive+Control;
			// From EIGHT_LEVEL_ALPHABETIC
			map[None] = Level1;
			map[Shift] = Level2;
			map[Lock]  = Level2;
			map[LevelThree] = Level3;
			map[Shift+LevelThree] = Level4;
			map[Lock+LevelThree] =  Level4;
			map[Lock+Shift+LevelThree] = Level3;
			// End

			map[LevelThree+Control] = Level7;
			map[Shift+LevelThree+Control] = Level8;
			map[Lock+LevelThree+Control] = Level8;

			// From EIGHT_LEVEL_ALPHABETIC
			map[LevelFive] = Level5;
			map[Shift+LevelFive] = Level6;
			map[Lock+LevelFive]  = Level6;
			map[LevelThree+LevelFive] = Level7;
			map[Shift+LevelThree+LevelFive] = Level8;
			map[Lock+LevelThree+LevelFive] =  Level8;
			map[Lock+Shift+LevelThree+LevelFive] = Level7;

			level_name[Level1] = "Base";
			level_name[Level2] = "Shift";
			level_name[Level3] = "Alt Base";
			level_name[Level4] = "Shift Alt";
			level_name[Level5] = "X";
			level_name[Level6] = "X Shift";
			// End
			level_name[Level7] = "Ctrl+Alt Base";
			level_name[Level8] = "Shift Ctrl+Alt";
		};
	};
	xkb_compat    {
		include "complete+ledscroll(group_lock)"
		interpret Pointer_EnableKeys {
			action = LockControls(controls=MouseKeys+Overlay1);
		};
		interpret Pointer_Accelerate {
			action= LockControls(controls=MouseKeysAccel);
		};
		interpret Pointer_Left {
			action = MovePtr(x=-8, y=+0);
		};
		interpret Pointer_Down {
			action = MovePtr(x=+0, y=+8);
		};
		interpret Pointer_Up {
			action = MovePtr(x=+0, y=-8);
		};
		interpret Pointer_Right {
			action = MovePtr(x=+8, y=+0);
		};
	};
	xkb_symbols "my" {
		include "pc+us+ru:2+inet(evdev)"
		key <AC01> {
			overlay1=<MACC>
		};
		key <AC02> {
			overlay1=<MBT2>,
			symbols[Group1] = [	  s,	S, ssharp, ssharp	]
		};
		key <AC03> {
			overlay1=<MBT3>
		};
		key <AC04> {
			overlay1=<MBT1>
		};

		key <AC06> {	
			type="PC_CONTROL_LEVEL3_LEVEL5_ALPHABETIC",
			overlay1=<MLFT>,
			actions[Group1] = [ NoAction(), NoAction(),
			            RedirectKey(keycode=<LEFT>, clearmodifiers=LevelThree),
			            RedirectKey(keycode=<LEFT>, clearmodifiers=LevelThree),
			            NoAction(), NoAction(), 
			            RedirectKey(keycode=<BKSP>, clearmodifiers=Control+LevelThree),
			            RedirectKey(keycode=<BKSP>, clearmodifiers=Control+LevelThree) ],
			actions[Group2] = [ NoAction(), NoAction(),
			            RedirectKey(keycode=<LEFT>, clearmodifiers=LevelThree),
			            RedirectKey(keycode=<LEFT>, clearmodifiers=LevelThree),
			            NoAction(), NoAction(), 
			            RedirectKey(keycode=<BKSP>, clearmodifiers=Control+LevelThree),
			            RedirectKey(keycode=<BKSP>, clearmodifiers=Control+LevelThree) ]
		};
		key <AC07> {	
			type="PC_CONTROL_LEVEL3_LEVEL5_ALPHABETIC",
			overlay1=<MDWN>,
			actions[Group1] = [ NoAction(), NoAction(),
			            RedirectKey(keycode=<DOWN>, clearmodifiers=LevelThree),
			            RedirectKey(keycode=<DOWN>, clearmodifiers=LevelThree),
			            NoAction(), NoAction(), 
			            RedirectKey(keycode=<RTRN>, clearmodifiers=Control+LevelThree),
			            RedirectKey(keycode=<RTRN>, clearmodifiers=Control+LevelThree) ],
			actions[Group2] = [ NoAction(), NoAction(),
			            RedirectKey(keycode=<DOWN>, clearmodifiers=LevelThree),
			            RedirectKey(keycode=<DOWN>, clearmodifiers=LevelThree),
			            NoAction(), NoAction(), 
			            RedirectKey(keycode=<RTRN>, clearmodifiers=Control+LevelThree),
			            RedirectKey(keycode=<RTRN>, clearmodifiers=Control+LevelThree) ]
		};
		key <AC08> {	
			type="PC_CONTROL_LEVEL3_LEVEL5_ALPHABETIC",
			overlay1=<MUP>,
			actions[Group1] = [ NoAction(), NoAction(),
			            RedirectKey(keycode=<UP>, clearmodifiers=LevelThree),
			            RedirectKey(keycode=<UP>, clearmodifiers=LevelThree),
			            NoAction(), NoAction(), 
			            RedirectKey(keycode=<HYPR>, clearmodifiers=Control+LevelThree),
			            RedirectKey(keycode=<HYPR>, clearmodifiers=Control+LevelThree) ],
			actions[Group2] = [ NoAction(), NoAction(),
			            RedirectKey(keycode=<UP>, clearmodifiers=LevelThree),
			            RedirectKey(keycode=<UP>, clearmodifiers=LevelThree),
			            NoAction(), NoAction(), 
			            RedirectKey(keycode=<HYPR>, clearmodifiers=Control+LevelThree),
			            RedirectKey(keycode=<HYPR>, clearmodifiers=Control+LevelThree) ]
		};
		key <AC09> {	
			overlay1=<MRHT>,
			actions[Group1] = [ NoAction(), NoAction(),
			            RedirectKey(keycode=<RGHT>, clearmodifiers=LevelThree),
			            RedirectKey(keycode=<RGHT>, clearmodifiers=LevelThree) ],
			actions[Group2] = [ NoAction(), NoAction(),
			            RedirectKey(keycode=<RGHT>, clearmodifiers=LevelThree),
			            RedirectKey(keycode=<RGHT>, clearmodifiers=LevelThree) ]
		};

		key <AB07> {
			symbols[Group1] = [ NoSymbol, NoSymbol, Pointer_EnableKeys ]
		};

		key <MACC> { [ Pointer_Accelerate ] };
		key <MBT1> { [ Pointer_Button1, Pointer_Button1, Pointer_Drag1, Pointer_Drag1 ] };
		key <MBT2> { [ Pointer_Button2, Pointer_Button2, Pointer_Drag2, Pointer_Drag2 ] };
		key <MBT3> { [ Pointer_Button3, Pointer_Button3, Pointer_Drag3, Pointer_Drag3 ] };
		key <MLFT> { [ Pointer_Left ] };
		key <MDWN> { [ Pointer_Down ] };
		key <MUP>  { [ Pointer_Up ] };
		key <MRHT> { [ Pointer_Right ] };

		key <CAPS> {
			type="PC_ALT_LEVEL3",
			symbols[Group1] = [ ISO_Level3_Latch, Caps_Lock, ISO_Next_Group, ISO_Prev_Group ]
		};
		key <MENU> {
			type="PC_SUPER_LEVEL3",
			symbols[Group1] = [ Menu, Menu, ISO_Next_Group, ISO_Prev_Group ]
		};
		key <HYPR> {
			type="ONE_LEVEL",
			symbols[Group1] = [ Multi_key ]
		};
	};
	xkb_geometry  { include "pc(pc105)"	};
};
