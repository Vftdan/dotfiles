set -s escape-time 0
setw -g mode-keys vi
set -g repeat-time 0
set -g default-terminal tmux-256color
set -ga terminal-overrides ",*-256color:Tc"

bind-key -T prefix C-n new-session -E
bind-key -T prefix C-^ last-window
bind-key -T prefix h select-pane -L\; switch-client -Tprefix
bind-key -T prefix j select-pane -D\; switch-client -Tprefix
bind-key -T prefix k select-pane -U\; switch-client -Tprefix
bind-key -T prefix l select-pane -R\; switch-client -Tprefix
bind-key -T prefix Left  select-pane -L\; switch-client -Tprefix
bind-key -T prefix Down  select-pane -D\; switch-client -Tprefix
bind-key -T prefix Up    select-pane -U\; switch-client -Tprefix
bind-key -T prefix Right select-pane -R\; switch-client -Tprefix
bind-key -T prefix N previous-window
bind-key -T prefix p paste-buffer
bind-key -T prefix v copy-mode
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Set outer terminal title
# #S for session name / number, #{pane_title} for inner terminal title
set -g set-titles on
set -g set-titles-string 'Tmux: [#S] #{pane_title}'

#set -g mouse-utf8 on
set -g mouse on

#set -g mode-mouse on
#set -g mouse-resize-pane on
#set -g mouse-select-pane on
#set -g mouse-select-window on

set -g status-style "reverse"
set -g status-right-style "reverse,bold,fg=#42bd00,bg=#002b36"
set -g status-right-length 60
set -g status-right "#{?#{||:#{==:#{window_panes},1},#{window_zoomed_flag}}, #{=37:pane_title} ,}#[noreverse,fg=#deffff#,bg=#383838] %Y-%m-%d %H:%M:%S "
set -g status-left-length 18
set -g status-left "#[noreverse,fg=#000042,bg=#42bd00,bold] #{?#{==:#{client_key_table},root},[#{=14:session_name}],-- #{client_key_table} --} "
# Some versions require 'default' instead of 'terminal'
set -g window-status-format "#[noreverse,bg=#383838,fg=terminal,underscore] #[bold,fg=#efbda0]#{?#{!=:#{window_panes},1},#{window_panes},}#[fg=terminal,nobold]#F #I:#W "
set -g window-status-current-format "#[noreverse,fg=terminal,bg=terminal,bold] #[fg=#efbda0]#{?#{!=:#{window_panes},1},#{window_panes},}#[fg=terminal]#F #I:#W "
set -g window-status-separator ""
set -g message-style "fg=terminal,bg=#383838"
set -g message-command-style "fg=terminal,bg=terminal"
set -g mode-style "fg=#efff7b,reverse"

set -g status-position "bottom"
set -g pane-border-status "off"
set -g pane-border-format "#[reverse,bold] #T "
set -g pane-border-status "bottom"
set -g pane-active-border-style "fg=#42bd00" 

set-hook -g window-layout-changed[0] 'if-shell -F "#{||:#{==:#{window_panes},1},#{window_zoomed_flag}}" "setw pane-border-status off; setw status-position bottom" "setw pane-border-status bottom; setw status-position top"'
set-hook -g after-new-window[0] 'setw pane-border-status off; setw status-position bottom'
set-hook -g after-split-window[0] 'setw pane-border-status bottom; setw status-position top'

set -g update-environment[00] CKCON_X11_DISPLAY
set -g update-environment[01] CLUTTER_IM_MODULE
set -g update-environment[02] DBUS_SESSION_BUS_ADDRESS
set -g update-environment[03] DBUS_SESSION_BUS_PID
set -g update-environment[04] DEFAULTS_PATH
set -g update-environment[05] DESKTOP_SESSION
set -g update-environment[06] DISPLAY
set -g update-environment[07] GDK_BACKEND
set -g update-environment[08] GDK_DPI_SCALE
set -g update-environment[09] GDK_SCALE
set -g update-environment[10] GDMSESSION
set -g update-environment[11] GDM_LANG
set -g update-environment[12] GTK_CSD
set -g update-environment[13] GTK_IM_MODULE
set -g update-environment[14] IMSETTINGS_MODULE
set -g update-environment[15] LANG
set -g update-environment[16] LANGUAGE
set -g update-environment[17] LC_ADDRESS
set -g update-environment[18] LC_IDENTIFICATION
set -g update-environment[19] LC_MEASUREMENT
set -g update-environment[20] LC_MONETARY
set -g update-environment[21] LC_NAME
set -g update-environment[22] LC_NUMERIC
set -g update-environment[23] LC_PAPER
set -g update-environment[24] LC_TELEPHONE
set -g update-environment[25] LC_TIME
set -g update-environment[26] MANDATORY_PATH
set -g update-environment[27] MWNOCAPTURE
set -g update-environment[28] MWNO_RIT
set -g update-environment[29] MWWM
set -g update-environment[30] NO_AT_BRIDGE
set -g update-environment[31] QT4_IM_MODULE
set -g update-environment[32] QT_ACCESSIBILITY
set -g update-environment[33] QT_IM_MODULE
set -g update-environment[34] QT_QPA_PLATFORM
set -g update-environment[35] QT_QPA_PLATFORMTHEME
set -g update-environment[36] QT_SCALE_FACTOR
set -g update-environment[37] QT_X11_NO_NATIVE_MENUBAR
set -g update-environment[38] UBUNTU_MENUPROXY
set -g update-environment[39] XDG_CONFIG_DIRS
set -g update-environment[40] XDG_CURRENT_DESKTOP
set -g update-environment[41] XDG_DATA_DIRS
set -g update-environment[42] XDG_SEAT
set -g update-environment[43] XDG_SEAT_PATH
set -g update-environment[44] XDG_SESSION_DESKTOP
set -g update-environment[45] XDG_SESSION_ID
set -g update-environment[46] XDG_SESSION_PATH
set -g update-environment[47] XDG_SESSION_TYPE
set -g update-environment[48] XDG_VTNR
set -g update-environment[49] XMODIFIERS
set -g update-environment[50] XPRA_LOG_DIR
set -g update-environment[51] XPRA_PULSE_SERVER
set -g update-environment[52] XPRA_PULSE_SINK_DEVICE_NAME
set -g update-environment[53] XPRA_PULSE_SOURCE_DEVICE_NAME
set -g update-environment[54] XPRA_SERVER_LOG
set -g update-environment[55] XPRA_SERVER_SOCKET
set -g update-environment[56] _JAVA_AWT_WM_NONREPARENTING
set -g update-environment[57] _JAVA_OPTIONS
